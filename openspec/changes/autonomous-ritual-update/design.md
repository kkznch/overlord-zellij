## Context

overlord-zellij は6つの Claude インスタンスを Zellij 上で統率するCLIツール。各インスタンスには `rituals/*.md` のシステムプロンプトが注入され、MCP relay 経由で自動通信する。

現状、各ロールの儀式プロンプトは「何を担当するか」は明確だが「いつ・どう動くか」の行動指針が弱く、ユーザーへの確認待ちが頻発する。インフラ（MCP relay + auto-notify）は整っているため、儀式プロンプトの更新のみで自律実行モデルを実現できる。

## Goals / Non-Goals

**Goals:**
- 魔王が三段階の裁量判断基準で自律的に行動する
- 軍師がタスク分解を即座に開始する（魔王への質問禁止）
- 四天王がメッセージ受信後即座に作業を開始する（確認待ち禁止）

**Non-Goals:**
- Rust コードの変更（儀式ファイルのみの更新）
- MCP relay プロトコルの変更
- 新しい MCP ツールの追加

## Decisions

### 三段階裁量判断基準の導入（魔王のみ）

魔王に対して操作のリスクレベルに応じた3段階の判断基準を設ける:

1. **即断即行**: ファイル作成・コード修正・テスト追加・ドキュメント更新 → 確認不要で即実行
2. **宣言即行**: API設計変更・DBスキーマ変更・大規模リファクタリング → 宣言して即実行、拒否されたら停止
3. **承認必須**: 本番デプロイ・認証変更・課金操作・不可逆データ削除 → 承認を待つ

**理由**: 全操作を自律にするとリスクが高く、全操作に承認を求めると従来と変わらない。操作のリスクレベルで判断基準を分けるのが妥当。

### 即応の法（軍師）/ 即動の法（四天王）を別セクションで追加

行動規範とは別に独立セクションとして追加する。

**理由**: 行動規範は「何をすべきか」、即応/即動の法は「いつ・どう動くか」で性質が異なる。混ぜると可読性が落ちる。

## Risks / Trade-offs

- [即断即行の範囲が広すぎるリスク] → 三段階で明確に区分し、不可逆操作は必ず承認必須にすることで緩和
- [四天王が暴走するリスク] → 軍師経由の指揮系統は維持。四天王が自律なのは「作業開始の即時性」であり、指揮系統を無視するわけではない
- [ユーザーの意図を誤解するリスク] → 魔王の「間違っていたら修正すればいい」方針で対応。宣言即行は拒否可能
